[workspace]
authors = ["fecet <xiezej@gmail.com>"]
channels = ["https://repo.prefix.dev/meta-forge", "conda-forge"]
name = "paxi"
platforms = ["linux-64"]
version = "0.1.0"

[tasks]

[system-requirements]
cuda = "12.7"
libc = { family = "glibc", version = "2.34" }

[dependencies]
rust = "<1.87"
evcxr = "*"
jupyterlab = "*"
qemu = "*"
dagger = "*"
virtiofsd = "*"
dagger-io = "*"
python = "3.10.*"
podman-docker = "*"

[activation.env]
JUPYTER_PATH = "$CONDA_PREFIX/share/jupyter"
CONTAINER_HOST = 'unix://$(find $XDG_RUNTIME_DIR -type s -name "*podman*api.sock" 2>/dev/null)'
# CONTAINER_HOST = "unix:///var/run/podman/podman.sock"
CONTAINER_NAME = "dagger-engine-custom"
# _EXPERIMENTAL_DAGGER_RUNNER_HOST = "docker-image://registry.dagger.io/engine"
_EXPERIMENTAL_DAGGER_RUNNER_HOST = "docker-container://$CONTAINER_NAME"
_EXPERIMENTAL_DAGGER_CLI_BIN = "$CONDA_PREFIX/bin/dagger"
__PIXI_ACTIVATION__SCRIPT__ = """$(
touch $CONDA_PREFIX/etc/containers/nodocker
)
"""
